# X-UI æµé‡ç»Ÿè®¡é¢æ¿

[![Go Version](https://img.shields.io/badge/Go-1.21+-blue.svg)](https://golang.org/)
[![Vue Version](https://img.shields.io/badge/Vue-3.0+-green.svg)](https://vuejs.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)

ä¸€ä¸ªç°ä»£åŒ–çš„X-UIæµé‡ç»Ÿè®¡é¢æ¿ï¼Œä½¿ç”¨Vue3 + Goæ„å»ºï¼Œæ”¯æŒå¤šæœåŠ¡å™¨æµé‡ç›‘æ§å’Œå¯è§†åŒ–ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Go 1.21+**: é«˜æ€§èƒ½åç«¯æœåŠ¡
- **Gin**: Webæ¡†æ¶
- **SQLite**: è½»é‡çº§æ•°æ®åº“
- **JWT**: èº«ä»½è®¤è¯

### å‰ç«¯
- **Vue 3**: æ¸è¿›å¼JavaScriptæ¡†æ¶
- **Vite**: å¿«é€Ÿæ„å»ºå·¥å…·
- **Pinia**: çŠ¶æ€ç®¡ç†
- **Chart.js**: æ•°æ®å¯è§†åŒ–
- **Tailwind CSS**: æ ·å¼æ¡†æ¶

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
x-ui-panel/
â”œâ”€â”€ backend/              # Goåç«¯ä»£ç 
â”‚   â”œâ”€â”€ main.go          # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ database/        # æ•°æ®åº“ç›¸å…³ä»£ç 
â”‚   â”‚   â”œâ”€â”€ database.go  # æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ api.go      # APIå¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ auth.go     # è®¤è¯ç›¸å…³
â”‚   â”œâ”€â”€ go.mod          # Goæ¨¡å—æ–‡ä»¶
â”‚   â””â”€â”€ go.sum          # Goä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ web/                 # Vue3å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/  # Vueç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/      # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/     # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/      # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ assets/     # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ router/     # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ App.vue     # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js     # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ package.json    # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ vite.config.js  # Viteæ„å»ºé…ç½®
â”‚   â””â”€â”€ index.html      # HTMLå…¥å£æ–‡ä»¶
â”œâ”€â”€ configs/            # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ env.example     # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ docker-compose.yml # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ scripts/            # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ start.sh        # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ docker-deploy.sh # Dockeréƒ¨ç½²è„šæœ¬
â”œâ”€â”€ Dockerfile          # Dockeræ„å»ºæ–‡ä»¶
â”œâ”€â”€ .gitignore          # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md           # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Go**: 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 18 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Docker**: 20.10 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
- **å†…å­˜**: è‡³å°‘ 512MB RAM
- **å­˜å‚¨**: è‡³å°‘ 100MB å¯ç”¨ç©ºé—´

## ğŸš€ å¿«é€Ÿå¼€å§‹

### docker compose éƒ¨ç½²

```
version: '3.8'

services:
  x-ui-traffic:
    image: sanqi37/x-ui-panel 
    container_name: x-ui-traffic-panel
    restart: unless-stopped
    ports:
      - "37022:37022"
    environment:
      - LISTEN_PORT=37022
      - DATABASE_PATH=/app/data/xui_traffic.db
      - X_UI_PASSWORD=${X_UI_PASSWORD:-admin123}
      - DEBUG_MODE=${DEBUG_MODE:-false}
      - LOG_LEVEL=${LOG_LEVEL:-info}
    volumes:
      - ./data:/app/data

```
### Dockerè‡ªå·±ç¼–è¯‘éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd x-ui-panel

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp configs/env.example configs/.env
# ç¼–è¾‘ configs/.env æ–‡ä»¶ï¼Œè®¾ç½®å¯†ç 

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. è®¿é—®é¢æ¿
# æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:37022
# é»˜è®¤å¯†ç : admin123
```

### æœ¬åœ°å¼€å‘

```bash
# 1. å¯åŠ¨åç«¯
cd backend
export X_UI_PASSWORD=your_password
go run main.go

# 2. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd web
npm install
npm run dev

# 3. è®¿é—®å‰ç«¯
# æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `X_UI_PASSWORD` | `admin123` | ç™»å½•å¯†ç ï¼ˆå¿…å¡«ï¼‰ |
| `LISTEN_PORT` | `37022` | æœåŠ¡ç›‘å¬ç«¯å£ |
| `DEBUG_MODE` | `true` | è°ƒè¯•æ¨¡å¼ |
| `LOG_LEVEL` | `info` | æ—¥å¿—çº§åˆ« |
| `DATABASE_PATH` | `xui_traffic.db` | æ•°æ®åº“æ–‡ä»¶è·¯å¾„ |

### Dockeré…ç½®

- **ç«¯å£æ˜ å°„**: `37022:37022`
- **æ•°æ®æŒä¹…åŒ–**: `./data:/app/data`
- **å¥åº·æ£€æŸ¥**: è‡ªåŠ¨æ£€æµ‹æœåŠ¡çŠ¶æ€
- **è‡ªåŠ¨é‡å¯**: å®¹å™¨å¼‚å¸¸æ—¶è‡ªåŠ¨é‡å¯

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

- ğŸ” **å®‰å…¨è®¤è¯**: åŸºäºJWTçš„ç™»å½•éªŒè¯ç³»ç»Ÿ
- ğŸ“Š **å®æ—¶ç›‘æ§**: å¤šæœåŠ¡å™¨æµé‡æ•°æ®å®æ—¶å±•ç¤º
- ğŸ“ˆ **æ•°æ®å¯è§†åŒ–**: ä½¿ç”¨Chart.jsç»˜åˆ¶æµé‡è¶‹åŠ¿å›¾
- ğŸ¨ **ç°ä»£åŒ–UI**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**: æ”¯æŒDockerä¸€é”®éƒ¨ç½²
- ğŸ”„ **è‡ªåŠ¨åˆ·æ–°**: æ•°æ®è‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°
- â° **æ™ºèƒ½çŠ¶æ€**: 60ç§’æ´»è·ƒçŠ¶æ€åˆ¤æ–­ï¼Œå‡å°‘è¯¯åˆ¤
- ğŸŒ **æ—¶åŒºæ”¯æŒ**: æ­£ç¡®å¤„ç†å¤šæ—¶åŒºæ—¶é—´æ˜¾ç¤º
- ğŸ“± **ç§»åŠ¨é€‚é…**: å®Œç¾æ”¯æŒæ‰‹æœºå’Œå¹³æ¿è®¾å¤‡

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°ç»„ä»¶
1. åœ¨ `web/src/components/` åˆ›å»ºç»„ä»¶æ–‡ä»¶
2. ä½¿ç”¨Composition APIç¼–å†™ç»„ä»¶é€»è¾‘
3. åœ¨éœ€è¦çš„é¡µé¢ä¸­å¯¼å…¥å¹¶ä½¿ç”¨

### æ·»åŠ æ–°API
1. åœ¨ `backend/database/api.go` ä¸­æ·»åŠ æ–°çš„å¤„ç†æ–¹æ³•
2. åœ¨ `RegisterRoutes` ä¸­æ³¨å†Œè·¯ç”±
3. åœ¨å‰ç«¯ `web/src/utils/api.js` ä¸­æ·»åŠ å¯¹åº”çš„APIè°ƒç”¨

### æ•°æ®åº“è¿ç§»
1. ä¿®æ”¹ `backend/database/database.go` ä¸­çš„ `initDatabase` å‡½æ•°
2. æ·»åŠ æ–°çš„è¡¨ç»“æ„æˆ–å­—æ®µ
3. é‡å¯æœåŠ¡ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨è¿ç§»

## ğŸ”Œ APIæ–‡æ¡£

### è®¤è¯æ¥å£
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º

### æœåŠ¡ç®¡ç†
- `GET /api/db/services` - è·å–æœåŠ¡åˆ—è¡¨
- `GET /api/db/service/:id` - è·å–æœåŠ¡è¯¦æƒ…
- `DELETE /api/db/service/:id` - åˆ é™¤æœåŠ¡

### æµé‡æ•°æ®
- `POST /api/traffic` - æ¥æ”¶æµé‡æ•°æ®
- `GET /api/db/traffic-summary` - è·å–æµé‡æ±‡æ€»
- `GET /api/db/traffic-history` - è·å–æµé‡å†å²
- `GET /api/db/weekly-traffic/:id` - è·å–å‘¨æµé‡æ•°æ®

### ç«¯å£å’Œç”¨æˆ·è¯¦æƒ…
- `GET /api/db/port-detail/:service_id/:tag` - è·å–ç«¯å£è¯¦æƒ…
- `GET /api/db/user-detail/:service_id/:email` - è·å–ç”¨æˆ·è¯¦æƒ…

## ğŸ”’ å®‰å…¨è¯´æ˜

- æ‰€æœ‰APIæ¥å£ï¼ˆé™¤ç™»å½•å¤–ï¼‰éƒ½éœ€è¦JWTè®¤è¯
- å¯†ç é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œæ”¯æŒDockeréƒ¨ç½²
- æ”¯æŒCORSè·¨åŸŸé…ç½®
- æ•°æ®åº“ä½¿ç”¨SQLiteï¼Œæ•°æ®æ–‡ä»¶å¯æŒä¹…åŒ–

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- å‰ç«¯ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- é™æ€èµ„æºå‹ç¼©å’Œç¼“å­˜
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨æ¢å¤

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç™»å½•å¤±è´¥**
   - æ£€æŸ¥ç¯å¢ƒå˜é‡ `X_UI_PASSWORD` æ˜¯å¦æ­£ç¡®è®¾ç½®
   - æŸ¥çœ‹åç«¯æ—¥å¿—ç¡®è®¤è®¤è¯é€»è¾‘

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - ç¡®è®¤SQLite3å·²å®‰è£…
   - æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™

3. **å‰ç«¯æ— æ³•è¿æ¥åç«¯**
   - ç¡®è®¤åç«¯æœåŠ¡å·²å¯åŠ¨
   - æ£€æŸ¥Viteä»£ç†é…ç½®

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹Dockerå®¹å™¨æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹å‰ç«¯æ„å»ºæ—¥å¿—
cd web && npm run build
```

### éƒ¨ç½²è„šæœ¬
```bash
# ä½¿ç”¨éƒ¨ç½²è„šæœ¬æ„å»ºå’Œæ¨é€Dockeré•œåƒ
./scripts/docker-deploy.sh

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
./scripts/start.sh
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚



